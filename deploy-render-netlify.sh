#!/bin/bash

echo "üöÄ Render + Netlify Deployment Setup"
echo "===================================="

echo ""
echo "üìã Pre-deployment Checklist:"
echo "-----------------------------"

echo "‚úÖ 1. GitHub repository created and pushed"
echo "   - Repository is public"
echo "   - All code committed and pushed"

echo ""
echo "‚úÖ 2. Stripe keys ready"
echo "   - Test keys for development"
echo "   - Live keys for production"

echo ""
echo "üîó Step-by-Step Deployment:"
echo "---------------------------"

echo "üåê 1. Deploy Frontend to Netlify:"
echo "   a. Go to: https://netlify.com"
echo "   b. Click 'Add new site' > 'Import from Git'"
echo "   c. Connect your GitHub repository"
echo "   d. Build settings auto-configured ‚úÖ"
echo "   e. Add environment variables in Netlify dashboard"

echo ""
echo "üöÄ 2. Deploy Backend to Render:"
echo "   a. Go to: https://render.com"
echo "   b. Click 'New' > 'Web Service'"
echo "   c. Connect GitHub repository"
echo "   d. Set root directory to: server"
echo "   e. Build command: npm install"
echo "   f. Start command: npm start"
echo "   g. Add environment variables in Render dashboard"

echo ""
echo "üîß Required Environment Variables:"
echo "----------------------------------"

echo "Netlify (Frontend):"
echo "   VITE_STRIPE_PUBLISHABLE_KEY=pk_test_..."
echo "   VITE_API_URL=https://your-backend.onrender.com"

echo ""
echo "Render (Backend):"
echo "   STRIPE_SECRET_KEY=sk_test_..."
echo "   CLIENT_URL=https://your-site.netlify.app"
echo "   PORT=10000"
echo "   NODE_ENV=production"
echo "   STRIPE_WEBHOOK_SECRET=whsec_..."

echo ""
echo "üß™ Testing Commands:"
echo "-------------------"

echo "1. Test Backend Health:"
echo "   curl https://your-backend.onrender.com/health"

echo ""
echo "2. Test Payment Creation:"
echo "   curl -X POST https://your-backend.onrender.com/create-checkout-session \\"
echo "     -H 'Content-Type: application/json' \\"
echo "     -d '{\"courseName\":\"Test Program\",\"price\":999}'"

echo ""
echo "3. Test Frontend:"
echo "   - Visit: https://your-site.netlify.app"
echo "   - Click any 'Enroll Now' button"
echo "   - Use test card: 4242424242424242"

echo ""
echo "üí≥ Test Card Numbers:"
echo "---------------------"
echo "‚úÖ Success: 4242424242424242 (any future date, any CVC)"
echo "‚ùå Declined: 4000000000000002"
echo "üí∞ Insufficient: 4000000000009995"

echo ""
echo "‚úÖ Success Checklist:"
echo "---------------------"
echo "- [ ] Frontend deploys without errors"
echo "- [ ] Backend API responds to health check"
echo "- [ ] Payment flow works end-to-end"
echo "- [ ] Hash navigation works (#faq, #programs)"
echo "- [ ] Success/cancel redirects work"
echo "- [ ] Mobile responsive"

echo ""
echo "üîó Useful Links:"
echo "---------------"
echo "‚Ä¢ Netlify: https://netlify.com"
echo "‚Ä¢ Render: https://render.com"
echo "‚Ä¢ Stripe Dashboard: https://dashboard.stripe.com"
echo "‚Ä¢ GitHub: https://github.com"

echo ""
echo "üí° Pro Tips:"
echo "-----------"
echo "‚Ä¢ Deploy frontend first, then backend"
echo "‚Ä¢ Copy Render URL to Netlify environment variables"
echo "‚Ä¢ Use test cards first, then live keys"
echo "‚Ä¢ Check deployment logs if anything fails"

echo ""
echo "üéâ Ready to Deploy!"
echo "Your meditation app is configured for Render + Netlify!"
echo "Total deployment time: 5-10 minutes"
echo "Monthly cost: $0 (free tiers)"
