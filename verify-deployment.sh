#!/bin/bash

echo "ğŸ” Meditation App - Deployment Verification"
echo "==========================================="

echo ""
echo "ğŸ“‹ Deployment Checklist:"
echo "------------------------"

echo "âœ… 1. Frontend deployed successfully"
echo "   - Site loads without errors"
echo "   - All pages render correctly"
echo "   - Hash navigation works (#faq, #programs)"

echo ""
echo "âœ… 2. Backend API deployed successfully"
echo "   - Health endpoint responds: GET /health"
echo "   - CORS configured correctly"
echo "   - Environment variables set"

echo ""
echo "âœ… 3. Stripe integration working"
echo "   - Live API keys configured"
echo "   - Webhook endpoint set up"
echo "   - Test payments process correctly"

echo ""
echo "ğŸ§ª Test Commands:"
echo "-----------------"

echo "1. Test API Health:"
echo "   curl https://your-backend-api.railway.app/health"
echo "   Expected: {\"status\":\"OK\"}"

echo ""
echo "2. Test Payment Creation:"
echo "   curl -X POST https://your-backend-api.railway.app/create-checkout-session \\"
echo "     -H 'Content-Type: application/json' \\"
echo "     -d '{\"courseName\":\"Test Program\",\"price\":999,\"priceId\":\"test\"}'"
echo "   Expected: {\"url\":\"https://checkout.stripe.com/...\"}"

echo ""
echo "3. Test Frontend:"
echo "   - Visit: https://your-site.netlify.app"
echo "   - Click 'Enroll Now' on any program"
echo "   - Complete payment with test card"
echo "   - Verify success/cancel redirects work"

echo ""
echo "ğŸ”§ Test Card Numbers (Stripe):"
echo "------------------------------"
echo "âœ… Success: 4242424242424242"
echo "âŒ Declined: 4000000000000002"
echo "ğŸ’° Insufficient: 4000000000009995"
echo "ğŸ“… Any future expiry date"
echo "ğŸ” Any 3-digit CVC"

echo ""
echo "ğŸš¨ Common Issues & Solutions:"
echo "-----------------------------"

echo "âŒ CORS Error:"
echo "   â€¢ Check CLIENT_URL in backend environment"
echo "   â€¢ Verify frontend URL matches exactly"

echo ""
echo "âŒ Stripe Error:"
echo "   â€¢ Verify API keys are live (pk_live_, sk_live_)"
echo "   â€¢ Check webhook endpoint URL"
echo "   â€¢ Ensure webhook secret matches"

echo ""
echo "âŒ Build Error:"
echo "   â€¢ Check Node.js version (18.x recommended)"
echo "   â€¢ Verify all dependencies installed"
echo "   â€¢ Check environment variables"

echo ""
echo "âœ… Production Ready Checklist:"
echo "------------------------------"

echo "ğŸ” Security:"
echo "- [ ] Live Stripe keys (not test keys)"
echo "- [ ] HTTPS only (automatic with deployment platforms)"
echo "- [ ] CORS properly configured"
echo "- [ ] Webhook signature verification"

echo ""
echo "ğŸš€ Performance:"
echo "- [ ] Fast loading times"
echo "- [ ] Mobile responsive"
echo "- [ ] Optimized images"
echo "- [ ] CDN for static assets"

echo ""
echo "ğŸ’³ Payments:"
echo "- [ ] Real payment processing"
echo "- [ ] Email confirmations"
echo "- [ ] Proper error handling"
echo "- [ ] Success/cancel redirects"

echo ""
echo "ğŸ“± User Experience:"
echo "- [ ] All navigation works"
echo "- [ ] Forms submit correctly"
echo "- [ ] Loading states display"
echo "- [ ] Error messages helpful"

echo ""
echo "ğŸ¯ Final Steps:"
echo "---------------"
echo "1. Test complete payment flow"
echo "2. Verify email notifications"
echo "3. Set up monitoring (optional)"
echo "4. Configure custom domain (optional)"
echo "5. Go live! ğŸ‰"

echo ""
echo "ğŸ“ Need Help?"
echo "-------------"
echo "â€¢ Check deployment platform logs"
echo "â€¢ Review Stripe dashboard for errors"
echo "â€¢ Test with different browsers"
echo "â€¢ Validate all environment variables"
